<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>The HTML5 Herald</title>
    <meta name="description" content="The HTML5 Herald">
    <meta name="author" content="SitePoint">

    <link rel="stylesheet" href="leaflet.css"/>
    <link rel="stylesheet" href="routing/dist/leaflet-routing-machine.css"/>
    <script src="leaflet.js"></script>
    <script src="routing/dist/leaflet-routing-machine.js"></script>

</head>

<body>
    <style>
        #map {
            height: 450px;
            width:900px;
        }
    </style>
    <div id="map"></div>
    <script>

        var mapOptions = {
        maxZoom: 18,
        zoomControl: false,
        worldCopyJump: true 
        }

        var my_map = function () {
            var map_id = 'map';
            var map = L.map(map_id,mapOptions);

            L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            map.locate({setView: true});


            // ---------------------------------------------------------------

            function createButton(label, container) {
            var btn = L.DomUtil.create('button', '', container);
            btn.setAttribute('type', 'button');
            btn.innerHTML = label;
            return btn;
            }

            map.on('click', function(e) {
                var container = L.DomUtil.create('div'),
                startBtn = createButton('Start from this location', container),
                destBtn = createButton('Go to this location', container);

                L.popup()
                    .setContent(container)
                    .setLatLng(e.latlng)
                    .openOn(map);

                    L.DomEvent.on(startBtn, 'click', function() {
                        L.Routing.control.spliceWaypoints(0, 1, e.latlng);
                        map1.closePopup();
                    });

                    L.DomEvent.on(destBtn, 'click', function() {
                        L.Routing.control.spliceWaypoints( L.Routing.control.getWaypoints().length - 1, 1, e.latlng);
                        map1.closePopup();
                    });
            });           

            

            var ReversablePlan = L.Routing.Plan.extend({
                createGeocoders: function() {
                    var container = L.Routing.Plan.prototype.createGeocoders.call(this),
                        reverseButton = createButton('↑↓', container);
                    return container;
                }
            });

            
            // ------------------------------------------------------------------

            return map;
        }

        my_map();

        

        
        



    </script>
</body>


</html>